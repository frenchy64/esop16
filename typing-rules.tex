\begin{figure*}
\begin{mathpar}

  {\TLocal}

\infer [T-Const]
{}
{ \judgement {\propenv{}} 
             {\hastype {\const{}} {\constanttype{\const{}}}}
             {\filterset {\topprop{}}{\botprop{}}}
             {\emptyobject{}}
                   }

{\TTrue}

{\TFalse}

{\TNil}

{\TDo}

{\TIf}

{\TLet}
                 
{\TApp}

{\TAbs}

\infer [T-Clos]
{ \exists {\propenv{}}. \satisfies{\openv{}}{\propenv{}}
  \ \text{and}\ 
\judgement {\propenv{}} {\hastype {\abs {\x{}} {\t{}} {\e{}}} {\s{}}}
                 {\filterset {\thenprop {\prop{}}}
                             {\elseprop {\prop{}}}}
                 {\object{}}
              }
{ \judgement {}
            {\hastype {\closure {\openv{}} {\abs {\x{}} {\t{}} {\e{}}}} 
                      {\s{}}}
             {\filterset {\thenprop {\prop{}}}
                         {\elseprop {\prop{}}}}
             {\object{}}}

\infer [T-Error]
{}
{ \judgement {\propenv{}} {\hastype {\errorvalv} {\Bot}}
            {\filterset {\botprop{}} {\botprop{}}}
           {\emptyobject{}}}

         {\TSubsume}
\end{mathpar}
\caption{Standard Typing Rules}
\end{figure*}


\begin{figure*}
\begin{mathpar}

{\TNewStatic}

{\TFieldStatic}

{\TMethodStatic}

{\TClass}

\infer [T-Instance]
{}
{ \judgement {\propenv{}} {\hastype{\classvalue{\classhint{}} {\overrightarrow {\classfieldpair{\fld{}} {\v{}}}}}{\class{}}}{\filterset{\topprop{}}{\botprop{}}}{\emptyobject{}}}

\end{mathpar}
\caption{Java Interop Typing Rules}
\end{figure*}

\begin{figure*}
\begin{mathpar}

  \TDefMulti{}
  \TDefMethod{}

\TIsA{}

\infer [T-Multi]
{ \judgementtwo {} {\hastype {\v{}} {\t{}}}
  \\
  \overrightarrow{\judgementtwo{}{\hastype{\v{k}}{\Top{}}}}
  \\
  \overrightarrow{\judgementtwo{}{\hastype{\v{v}}{\s{}}}}
}
{ \judgement {}
  {\hastype {\multi {\v{}} {\curlymapvaloverright{\v{k}}{\v{v}}}}
                      {\MultiFntype {\s{}} {\t{}}}}
             {\filterset {\topprop{}} {\botprop{}}}
           {\emptyobject{}}}

\end{mathpar}
\caption{Multimethod Typing Rules}
\end{figure*}

\begin{figure*}
\begin{mathpar}

%\infer [T-Get]
%{ \judgementtwo {\propenv{}} {\hastype {\e{m}} {\Map {\t{k}}{\t{v}}}}
%  \\
%  \judgementtwo {\propenv{}} {\hastype {\e{k}} {\Top}}}
%{ \judgement {\propenv{}} {\hastype {\getexp {\e{m}} {\e{k}}} {\Union{\t{v}}{\nil{}}}}
%             {\filterset {\topprop{}} {\topprop{}}}
%           {\emptyobject{}}}
%
%\infer [T-Assoc]
%{ 
%  \judgementtwo {\propenv{}} {\hastype {\e{m}} {\Map{\t{k}}{\t{v}}}}
%  \\
%  \judgementtwo {\propenv{}} {\hastype {\e{k}} {\t{k}}}
%  \\
%  \judgementtwo {\propenv{}} {\hastype {\e{v}} {\t{v}}}
%}
%{ \judgement {\propenv{}} 
%             {\hastype {\assocexp {\e{m}} {\e{k}} {\e{v}}} {\Map {\t{k}}{\t{v}}}}
%             {\filterset {\topprop{}} {\botprop{}}}
%             {\emptyobject{}}
%}

\infer [T-HMap]
{ \overrightarrow{\judgementtwo {} {\hastype{\v{k}}{\Value \k{}}}}\\
  \overrightarrow{\judgementtwo {} {\hastype{\v{v}}{\t{v}}}}\\
  \mandatory{} = \mandatorysetoverright{\k{}}{\t{v}}
}
{ \judgement {}
             {\hastype {\curlymapvaloverright{\v{k}}{\v{v}}}
                       {\HMapc {\mandatory{}}}}
             {\filterset {\topprop{}} {\botprop{}}}
             {\emptyobject{}}}

\infer [T-Kw]
{}
{ \judgementfillcol {\propenv{}} 
      {\hastype {\k{}} {\Value{\k{}}}}
      {\filterset {\topprop{}}{\botprop{}}}
      {\emptyobject{}} 
    }

\infer [T-GetHMap]
{ \judgement {\propenv{}} 
  {\hastype {\e{m}} {\Unionsplice {{\overrightarrow {\HMapgeneric {\mandatory{}} {\absent{}}}}^i}}}
           {\filterset {\thenprop {\prop{}}} {\elseprop {\prop{}}}}
           {\object{}}
           \\\\
  \judgementtwo {\propenv{}} {\hastype {\e{k}} {\Value {k}}}
             \\
             {\overrightarrow{\inmandatory{\k{}}{\t{}}{\mandatory{}}}}^i
       }
{ \judgement {\propenv{}} {\hastype {\getexp {\e{m}} {\e{k}}} {\Unionsplice {{\overrightarrow {\t{}}}^i}}}
             {\filterset {\topprop{}} {\topprop{}}}
             {\replacefor {\path {\keype{k}} {\x{}}}
                          {\object{}}
                          {\x{}}}
                                  }

\infer [T-GetHMapAbsent]
{ \judgement {\propenv{}} {\hastype {\e{m}} {\HMapgeneric {\mandatory{}} {\absent}}}
           {\filterset {\thenprop {\prop{}}} {\elseprop {\prop{}}}}
           {\object{}}
         \\\\
  \judgementtwo {\propenv{}} {\hastype {\e{k}} {\Value {k}}}
             \\
             {\inabsent{\k{}}{\absent{}}}
       }
{ \judgement {\propenv{}} {\hastype {\getexp {\e{m}} {\e{k}}}
                                    {\Nil{}}}
             {\filterset {\topprop{}} {\topprop{}}}
             {\replacefor
               {\path {\keype{k}} {\x{}}}
                          {\object{}}
                          {\x{}}}
                        }

\infer [T-GetHMapPartialDefault]
{ \judgement {\propenv{}} {\hastype {\e{m}} {\HMapp {\mandatory{}} {\absent}}}
           {\filterset {\thenprop {\prop{}}} {\elseprop {\prop{}}}}
           {\object{}}
         \\\\
  \judgementtwo {\propenv{}} {\hastype {\e{k}} {\Value {k}}}
             \\
             {\notinmandatory{\k{}}{\t{}}{\mandatory{}}}
             \\
             {\notinabsent{\k{}}{\absent{}}}
       }
{ \judgement {\propenv{}} {\hastype {\getexp {\e{m}} {\e{k}}}
                                    {\Top{}}}
             {\filterset {\topprop{}} {\topprop{}}}
             {\replacefor
               {\path {\keype{k}} {\x{}}}
                          {\object{}}
                          {\x{}}}
                        }

\infer [T-AssocHMap]
{ 
  \judgementtwo {\propenv{}} {\hastype {\e{m}} {\HMapgeneric {\mandatory{}} {\absent}}}
  \\
  \judgementtwo {\propenv{}} {\hastype {\e{k}} {\Value{\k{}}}}
  \\
  \judgementtwo {\propenv{}} {\hastype {\e{v}} {\t{}}}
  \\
  {\k{}} \not\in {\absent{}}
}
{ \judgement {\propenv{}} 
             {\hastype {\assocexp {\e{m}} {\e{k}} {\e{v}}}
                       {\HMapgeneric {\extendmandatoryset {\mandatory{}}{\k{}}{\t{}}} {\absent}}}
             {\filterset {\topprop{}} {\botprop{}}}
             {\emptyobject{}}
}

\end{mathpar}
\caption{Map Typing Rules}
\end{figure*}
