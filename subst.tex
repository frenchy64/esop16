\begin{figure*}
$$
\begin{array}{lclr}

{\replacefor
  {\filterset {\thenprop {\prop{}}}{\elseprop {\prop{}}}}
  {\object{}}
  {\x{}}}
  &=&
{\filterset 
  {\replacefor
    {\thenprop {\prop{}}}
    {\object{}}
    {\x{}}}
  {\replacefor
    {\elseprop {\prop{}}}
    {\object{}}
    {\x{}}}}
\\\\
{\replacefor
  {\isprop {\propisnotmeta{}} {\path {\pathelem{}} {\x{}}}}
  {\path {\pathelemp{}} {\y{}}}
  {\x{}}}
&=&
  {\isprop {({\replacefor
               {\propisnotmeta{}}
               {\path {\pathelemp{}} {\y{}}}
               {\x{}}})}
           {{\pathelem{}}({\path {\pathelemp{}} {\y{}}})}}
           \\

{\pluspolarity
{\replacefor
  {\isprop {\propisnotmeta{}} {\path {\pathelem{}} {\x{}}}}
  {\emptyobject{}}
  {\x{}}}
}
&=&
{\topprop{}}
\\
{\minuspolarity
{\replacefor
  {\isprop {\propisnotmeta{}} {\path {\pathelem{}} {\x{}}}}
  {\emptyobject{}}
  {\x{}}}
}
&=&
{\botprop{}}

\\
{\replacefor
  {\isprop {\propisnotmeta{}} {\path {\pathelem{}} {\x{}}}}
  {\object{}}
  {\z{}}}
&=&
  {\isprop {\propisnotmeta{}} {\path {\pathelem{}} {\x{}}}}
  & \x{} \not= \z{}\ \text{and}\ \z{} \not\in {\fv {\propisnotmeta{}}}

\\
{\pluspolarity
{\replacefor
  {\isprop {\propisnotmeta{}} {\path {\pathelem{}} {\x{}}}}
  {\object{}}
  {\z{}}}
}
&=&
{\topprop{}}
  & \x{} \not= \z{}\ \text{and}\ \z{} \in {\fv {\propisnotmeta{}}}
\\
{\minuspolarity
{\replacefor
  {\isprop {\propisnotmeta{}} {\path {\pathelem{}} {\x{}}}}
  {\object{}}
  {\z{}}}
}
&=&
{\botprop{}}
  & \x{} \not= \z{}\ \text{and}\ \z{} \in {\fv {\propisnotmeta{}}}

\\
{\replacefor
  {\topprop{}}
  {\object{}}
  {\x{}}}
&=&
  {\topprop{}}

\\
{\replacefor
  {\botprop{}}
  {\object{}}
  {\x{}}}
&=&
  {\botprop{}}

\\
{\pluspolarity
{\replacefor
  {({\impprop {\prop{1}} {\prop{2}}})}
  {\object{}}
  {\x{}}}
}
&=&
{\impprop 
  {\minuspolarity {\replacefor {\prop{1}} {\object{}} {\x{}}}}
  {\pluspolarity {\replacefor {\prop{2}} {\object{}} {\x{}}}}}
\\
{\minuspolarity
{\replacefor
  {({\impprop {\prop{1}} {\prop{2}}})}
  {\object{}}
  {\x{}}}
}
&=&
{\impprop 
  {\pluspolarity {\replacefor {\prop{1}} {\object{}} {\x{}}}}
  {\minuspolarity {\replacefor {\prop{2}} {\object{}} {\x{}}}}}
\\
{\replacefor
  {({\orprop {\prop{1}} {\prop{2}}})}
  {\object{}}
  {\x{}}}
&=&
{\orprop 
  {\replacefor {\prop{1}} {\object{}} {\x{}}}
  {\replacefor {\prop{2}} {\object{}} {\x{}}}}
\\
{\replacefor
  {({\andprop {\prop{1}} {\prop{2}}})}
  {\object{}}
  {\x{}}}
&=&
{\andprop 
  {\replacefor {\prop{1}} {\object{}} {\x{}}}
  {\replacefor {\prop{2}} {\object{}} {\x{}}}}

    \\\\

{\replacefor
  {\path {\pathelem{}} {\x{}}}
  {\path {\pathelemp{}} {\y{}}}
  {\x{}}}
           &=&
{\path{\pathelem{}}{\path {\pathelemp{}} {\y{}}}}

    \\

{\replacefor
  {\path {\pathelem{}} {\x{}}}
  {\emptyobject{}}
  {\x{}}}
           &=&
{\emptyobject{}}

    \\

{\replacefor
  {\path {\pathelem{}} {\x{}}}
  {\object{}}
  {\z{}}}
           &=&
{\path {\pathelem{}} {\x{}}}

& \x{} \not= \z{}
    \\

{\replacefor
  {\emptyobject{}}
  {\object{}}
  {\x{}}}
           &=&
{\emptyobject{}}

\end{array}
$$
\center{\text{Substitution on types is capture-avoiding structural recursion.}}
\caption{Substitution}
\end{figure*}
